<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Order Demo Selector</title>
<style>
  body { font-family: sans-serif; text-align: center; margin: 40px; }
  .btn { padding: 30px 60px; font-size: 24px; margin: 20px; border-radius: 12px; border: none; cursor: pointer; }
  .btn-send { background-color: #4CAF50; color: white; }
  .btn-receive { background-color: #2196F3; color: white; }
  .panel { display: none; margin-top: 40px; }
</style>
</head>
<body>

<h1>Order Demo</h1>
<div id="selection">
  <button class="btn btn-send" onclick="showPanel('send')">Send Orders</button>
  <button class="btn btn-receive" onclick="showPanel('receive')">Receive Orders</button>
</div>

<!-- Sender panel -->
<div id="sendPanel" class="panel">
  <h2>Sender</h2>
  <label>Item:
    <select id="item">
      <option>Waffles</option>
      <option>Pancakes</option>
      <option>Omelette</option>
    </select>
  </label>
  <div style="margin:20px;">
    <label><input type="checkbox" class="extra" value="x"> x</label>
    <label><input type="checkbox" class="extra" value="y"> y</label>
    <label><input type="checkbox" class="extra" value="z"> z</label>
  </div>
  <button onclick="sendOrder()">Send Order</button>
</div>

<!-- Receiver panel -->
<div id="receivePanel" class="panel">
  <h2>Receiver</h2>
  <div id="orders"></div>
</div>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
<script>
  // Replace with your Firebase config
  const firebaseConfig = {
    apiKey: "AIzaSyBfuY4ZvGJVBVtjoTQpdEqSmTGYQhRruNc",
    authDomain: "order-de.firebaseapp.com",
    databaseURL: "https://order-de-default-rtdb.europe-west1.firebasedatabase.app",
    projectId: "order-de",
    storageBucket: "order-de.firebasestorage.app",
    messagingSenderId: "366891884570",
    appId: "1:366891884570:web:fb93b67214061dea9af1a3"
  };
  firebase.initializeApp(firebaseConfig);
  const db = firebase.database();

  function showPanel(type) {
    document.getElementById('selection').style.display = 'none';
    if(type === 'send') document.getElementById('sendPanel').style.display = 'block';
    if(type === 'receive') {
      document.getElementById('receivePanel').style.display = 'block';
      listenOrders();
    }
  }

  function sendOrder() {
    const item = document.getElementById('item').value;
    const extras = Array.from(document.querySelectorAll('.extra'))
      .filter(c => c.checked).map(c => c.value);
    db.ref('orders').push({ item, extras, sentAt: Date.now() });
    alert('Order sent!');
  }

  function listenOrders() {
    const ordersNode = document.getElementById('orders');
    db.ref('orders').on('child_added', snapshot => {
      const data = snapshot.val();
      const extrasText = data.extras.length ? data.extras.join(' and ') : 'no extras';
      const div = document.createElement('div');
      div.textContent = `Received order: ${data.item} with ${extrasText}`;
      ordersNode.prepend(div);
    });
  }
</script>
</body>
</html>
